command:
  - streamlit
  - run
  - app_test.py
  - --server.port=8501
  - --server.address=0.0.0.0
  - --server.headless=true
  - --server.enableCORS=false
  - --server.enableXsrfProtection=false
  - --server.fileWatcherType=none

env:
  - name: 'STREAMLIT_SERVER_PORT'
    value: '8501'

resources:
  limits:
    memory: "4Gi"
    cpu: "2"

healthCheck:
  path: "/_stcore/health"
  port: 8501
  initialDelaySeconds: 60
  periodSeconds: 15
  timeoutSeconds: 10
  failureThreshold: 10

metadata:
  name: "payment-authorization-test"
  displayName: "Payment Authorization - Test Version"
  description: "Minimal test version to verify Streamlit starts"
